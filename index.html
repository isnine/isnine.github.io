<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.zanderwang.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Zander&#96;s blog">
<meta property="og:url" content="https://www.zanderwang.com/index.html">
<meta property="og:site_name" content="Zander&#96;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zander Wang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.zanderwang.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Zander`s blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zander`s blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2020/12/31/summary-2020/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/31/summary-2020/" class="post-title-link" itemprop="url">新的开始-2020年年终总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-12-31 21:06:58 / Modified: 22:16:47" itemprop="dateCreated datePublished" datetime="2020-12-31T21:06:58+08:00">2020-12-31</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>2020年，是我生活方式发生巨大改变的一年<br>疫情的到来，让许多我们以为司空见惯的事情变成不那么常见<br>比如，出国旅行，电影院</p>
<p>又让很多新鲜的事情融入到了我们的日常<br>比如，口罩，健康码</p>
<p>我想，在一年前，这个星球上应该没有人能够预想到这一年会发生这么多事<br>而于我，改变最大的是生活方式的不同</p>
<h1 id="城市"><a href="#城市" class="headerlink" title="城市"></a>城市</h1><p>2020年，我离开了深圳<br>深圳，是我生活了两年的城市</p>
<p>2018年1月，是我第一次来到深圳<br>那时正值长沙的冬天</p>
<p>我一直记得我第一次出后海地铁口时的感受<br>十几度的气温配合着暖阳夹杂着深圳湾飘过来的海风<br>仿佛从寒冬来到了春天那样温暖</p>
<p>这座城市带给了我很多记忆<br>第一次实习，第一次独自租房</p>
<p>这两年，我在深圳搬家换过4次房<br>第一次和同事一起合租的一间小卧室<br>第二次一个人住的一间楼梯房的小卧室<br>第三次和同事整租了一套楼梯房的一楼<br>第四次和同事整租了一套电梯房</p>
<p>实习，转正，拿了BAT的Offer，毕业，落户<br>这里见证了我最初成长的全部<br>而今年我离开了它<br>它于我是一个特别有意义和喜欢的城市<br>但由于众所周知的原因，它从来没有在我未来的定居计划中</p>
<p>我喜欢苏州的古典与现代的结合<br>它并不像很多城市那一样，划分一个景点，取一个古城的景点名字，就叫做历史<br>它划分了整整一个区-姑苏<br>在这个区里，所有建筑都不能超过北寺塔的高度<br>园林，寺庙，钟塔乃至整个姑苏区<br>它们不是因为游客的到来而变成了游客想看到的样子<br>而是因为它们从古至今就一直保持着这样子</p>
<p>有时想拍照，我会漫无目的在姑苏的街头走着<br>而累了，又坐上两站地铁到了新区的诚品书店<br>这是为什么，我喜欢它的原因</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>我离开了字节跳动，我一直很感恩和喜欢这间公司，同时也对字节跳动的未来充满信心<br>但是公司的好坏与否，与个人成长与否，其实并不是强相关的<br>对公司来说，人力是可量化的资源<br>而对个人来说，公司也是一种资源</p>
<p>设立合理的激励和淘汰机制对于一个公司是至关重要的，否则公司会成为一潭死水<br>而反过来，我觉得个人也需要有一种机制去review当前所在的和所得的，是否依旧是自己想要的<br>如果一味的呆在一家公司，然后只在背后抱怨得不到想到的，学不到想学的，每天工作很累我觉得这样才是真正的对自己和对公司不负责</p>
<p>我希望自己能够真正的去做一些有挑战的事情<br>我希望自己的代码能够让更多人所使用的<br>我希望自己能够更好的平衡生活和工作</p>
<p>微软，这是一直以来在我计划和目标中的公司<br>在19年年底的时候，我注意到了Outlook组大量扩招的信息<br>坦白来说，刚毕业三四个月，并不是一个好跳槽的时候</p>
<p>但是想着，如果注定未来要去苏州，要去微软<br>为何不早一些去呢？</p>
<p>得益于我之前一直保持着大量算法题的练习和大量的项目经验<br>我其实并没有在算法和专业上花费任何时间<br>我做的唯一的准备其实只是英语</p>
<p>我记得那时候为了英文面试，在闲鱼上找了个英语专业的大学生<br>连续一个月，晚上都在练口语对话</p>
<p>好在最后伴随着从苏州一起飞回深圳的，除了我，还有来自微软的Offer</p>
<p>就这样，我加入了微软</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>工作的改变，直接影响的就是生活的改变<br>从原来的一周工作六天，到现在可以Work from home，一周只要去2.5天公司<br>每天的工作时间，从原来的9点下班，到现在五点多下班<br>对比起来，生活体验和幸福感，简直成倍的增长</p>
<p>自己住的房子，也从原来深圳靠马路的60平两人合租房<br>变成了90多平，一个人住的，湖景房</p>
<p>家里也迎来了新的成员小泡芙是一只山猫纹布偶猫，<br>富贵超级喜欢它，基本24小时粘着不放</p>
<p>还有珂珂在英国读书，<br>等明年回国后，就是一家四口啦</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>工作，是为了更好的生活。<br>2020年，是世界变化很大的<br>也是我新的生活的开始。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2019/07/06/MobileApplicationInnovation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/07/06/MobileApplicationInnovation/" class="post-title-link" itemprop="url">移动应用创新赛总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-07-06 18:12:33" itemprop="dateCreated datePublished" datetime="2019-07-06T18:12:33+08:00">2019-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-08-07 20:21:32" itemprop="dateModified" datetime="2019-08-07T20:21:32+08:00">2019-08-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前记"><a href="#前记" class="headerlink" title="前记"></a>前记</h1><p>  “你为什么喜欢编程”<br>  这是我常被问到的一个问题，我认为编程是现代社会中每个人都可以掌握的“魔法”，我们在生活中享受着各种各样别人写好了的魔法，比如“出门不用钱包即可付款魔法”，“饿了就有外卖送上门魔法”，“买衣服不用出门魔法”。<br>  但另一方面，不是每一件生活中不方便的事情，都有很好的魔法能够解决。但是如果学会了编程，就可以自己来创造一个更好的魔法来解决这些问题，更能够帮助到他人，这就是我喜欢编程的原因。</p>
<h1 id="我的第一个魔法-校园助手"><a href="#我的第一个魔法-校园助手" class="headerlink" title="我的第一个魔法 - 校园助手"></a>我的第一个魔法 - 校园助手</h1><p>  2016年10月8日，这是我人生中写下第一行iOS代码的时刻，我试图在我不会一行Objective-C咒语的时候，尝试创造一个能够帮助全校学生查询课表，电费，成绩。同时能够全校学生发说说，二手交易，做网上作业等一系列综合性的一个魔法。<br>  在这之前，我们的学生查课表是去正方教务系统上打印成纸贴在宿舍墙上，查电费要用电脑上水电科的电费网站查询，做网上作业去教务处的作业平台，再加上，二手交易，说说等各种生活服务，全部都要记住不同的账号在不同的平台上才能够进行。<br>  我感觉到十分的不方便，在几个负责后端的学长下的帮助下，刚入大二刚一个月的我开始了零Objective-C基础创造iOS魔法的过程。<br>![屏幕快照 2019-07-06 下午10.13.10](<a target="_blank" rel="noopener" href="https://img.wxz.name/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7">https://img.wxz.name/屏幕快照</a> 2019-07-06 下午10.13.10.png)<br>  我花了一个星期，完成了当初的第一个版本，现在看起来界面十分稚嫩，但因为发布在了App Store，我马上迎来了我的用户们。用户们的反馈声音，让我意识到<strong>我不仅仅是在解决自己的问题，我同时也是在帮助别人</strong><br>  我开始了和实验室另一个学习UI的学姐一起合作，让App变得更加美观且实用，同时在17年5月，我恰好看到了CCCC移动应用大赛的通知，抱着想和其他同学一同进步学习的想法，我报名参加了。<br>  比赛的过程比我想象的要顺利，回想起来，我觉得<br>  1.初赛美观的设计稿，可行的方案介绍。<br>  2.复赛完整的运行视频。<br>  3.决赛可以现场演示的代码，和已经上架App Store的App<br>  是我认为的关键，此外作为前九名公开答辩，我认为很重要一点是需要准备 <strong>简洁易懂且美观</strong>的一分钟视频，因为台下评委能够对你app了解最深的就来自于这一分钟的视频。回想起，我最后虽然进入了前九名公开答辩，但只获得了全国二等奖，可能因为一是App的受众近是大学群体，甚至主要在自己学校，二是一分钟视频展示的不够完善。<br>  但我依旧比较开心，因为在我比赛的过程中，我不断完善了我的App，并且根据ITunes Connect统计，我的App“魔法”被用户累计使用了数百万次，获得了4.8星的评分。<br>  <img src="https://img.wxz.name/234.jpg" alt="234"></p>
<h1 id="我的第二个魔法-EASY相册"><a href="#我的第二个魔法-EASY相册" class="headerlink" title="我的第二个魔法 - EASY相册"></a>我的第二个魔法 - EASY相册</h1><p>  在第一年比赛之后，我一直策划着如何去构思我的第二个魔法，我希望它首先可以帮助到我，其次它可以帮助到其他人。一天我在微信上聊天，想要找到一张很久以前的照片发给朋友，但我怎样都找不着它，我开始意识到，我如果想快速找到这张照片，我只有一种办法–给它进行分类。但当我尝试了市面上带有智能分类的一系列软件，我发现他们都不能够支持将智能识别完的类型保存到本地，这也就是说没法在例如微信，微博之类的其他App中选择这些类型。<br>  我开始构思，如何自己来实现一个这样的分类，我调研了tensorflow等一系列的市面上成熟的机器学习方案，遗憾的是如果tensorflow模型放在服务端，我需要将用户照片上传上去，这将十分不安全同时也加到了运维成本，而如果打入在App中，由于tensorflow的依赖库存在，App体积将到600mb+，这是我无论如何也无法接受的。<br>  正当我一筹莫展的时候，Apple在WWDC2018宣布了CoreML2和Create ML，这仿佛使我看到了希望。我立马升级了mac的beta系统，并安装的Xcode的beta版，接着通过python爬取了一系列用来训练的数据集，接着丢入了Create ML中，大约二十分钟后，我得到了一个不足20kb的模型，我将其放至了我的App中，它控制台中，它成功的将我照片里每张照片的类型给智能识别出来了。</p>
<h2 id="遇到的难题"><a href="#遇到的难题" class="headerlink" title="遇到的难题"></a>遇到的难题</h2><p>  接下来我和我在学校找的另一名负责ui的队友，不断将界面完善。期间我遇到了很多技术上的问题。<br>  比如识别速度过慢,我需要通过多线程来解决，又比如识别完的照片，我需要保存到数据库，这样下次不用再次识别。<br>  其中我遇到最棘手的一个问题，是对相册地理位置的识别。在每张相片中是存取了相片拍摄时的经纬度的，但是要获取这个经纬度对应的城市，需要构造一个CLGeocoder译码器来发生网络请求来获取城市名。而复杂的情况在于这个api调用是有频率限制的，我想过了很多方案，比如维持队列每过多久请求一次，遇到请求失败后以2的次方为重试时间来重试。但是都无法在简短的时间内获取到一万多张照片的位置。<br>  后来我灵机一动，想到一个城市其实经纬度是一个很大的范围，我只要在前面每张照片请求时维持个map，来映射经纬度和城市的关系，然后将经纬度小数点范围后三位相同的照片都归类于这个城市，我就不必请求那么多次了，一个城市的所有照片请求一次即可全部完成了。</p>
<h2 id="决赛时刻"><a href="#决赛时刻" class="headerlink" title="决赛时刻"></a>决赛时刻</h2><p>  最终我在深圳-&gt;杭州的高铁路上，将我app的所有主体界面全部完成了。我们的决赛分为两天，是摆摊的形式来各自宣传自己的app，在第一天结束时，我意识到我还需要一些东西，能够让评委们相信我做的app是可行，有价值的。我想到了一个方案–上架至App Store。但是我只有一个晚上的时间，如何能够在一个晚上就审核通过呢？<br>  我想到了apple提供给开发者们的<a target="_blank" rel="noopener" href="https://developer.apple.com/appstore/contact/appreviewteam/index.html">加速审核的通道</a>，我用英文描述了我正在中国杭州参加由apple&amp;浙大举办的CCCC比赛，为了能够展示作品，我希望能够发布到App Store上的意愿。<br>  <img src="https://img.wxz.name/WX20190707-093736@2x.png" alt="WX20190707-093736@2x"><br>  9月16日早上9点是决赛开始的时间。<br>  9月16日凌晨2：30分，我的App通过App Store最终审核发布。因为iOS 12正式版在9月18日才发布，所以我此时的状态是等待apple发布，但是已经全部可以在App Store上预约审核了，并且每一个评委可以通过Test Flight的方式体验我的App<br>  最终在决赛答辩之后，我获得了全国一等奖，超越了去年的自己。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>  决赛之后，我的主要精力其实依旧还是放在了开发「EASY相册」的过程上。我认为做一款App要有“工匠精神”，比赛只是一个平台，可以去引导你去和队友们一起实践、创新。但比赛获奖不是做App的最终目的，我最终是希望能让自己的App“魔法”给越来越多的人带来帮助。<br>  我希望有一天，我能够将这个app完善的足够好，然后把它带给更多需要整理相册的人。<br><img src="https://img.wxz.name/aaaaaaa.jpg" alt="aaaaaaa"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2019/05/16/fastlane-ios/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/16/fastlane-ios/" class="post-title-link" itemprop="url">iOS Fastlane+CI自动化构建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-16 18:12:33" itemprop="dateCreated datePublished" datetime="2019-05-16T18:12:33+08:00">2019-05-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-09-02 12:26:05" itemprop="dateModified" datetime="2019-09-02T12:26:05+08:00">2019-09-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>在公司时，都是由一套完整的工具链完成，开发-&gt;构建-&gt;分发-&gt;测试，等流程<br>而作为个人开发时，失去了这套工具链，自然感觉到十分不便<br>所以笔者思考，能否自己搭建一套这样的工具链呢</p>
<h1 id="需求列表"><a href="#需求列表" class="headerlink" title="需求列表"></a>需求列表</h1><p>搭建一套工具，首先要明确我想实现的效果<br>我目前发布一个版本到TestFlight内测，需要以下几个步骤</p>
<ul>
<li>手动改Xcode的build号格式为当天日期+次数，如09051601</li>
<li>手动archive，等待漫长过程，然后上传appstore</li>
<li>等待30分钟左右机器审核，然后手动选择组</li>
<li>重复输入更新内容，再点分发测试</li>
</ul>
<p>如果需要发一个版本到AppStore<br>除了上述几个内容，我还需要</p>
<ul>
<li>选择编译版本</li>
<li>添加版本更新内容</li>
<li>选择有无加密app</li>
<li>有无增加广告标识号</li>
</ul>
<p>对于我而说，我希望上述两个过程，全部可以分别通过一行命令来进行<br>我希望我只需要<strong>git push</strong>一下，这些操作会自动在背后ci构建</p>
<h1 id="最终实现效果"><a href="#最终实现效果" class="headerlink" title="最终实现效果"></a>最终实现效果</h1><p>本地git push后</p>
<ul>
<li>如果当前在master分支，ci自动打包发布TestFlight，版本号为当前日期+次数，并打tag提交。</li>
<li>如果当前在release/xxx分支，ci自动发布AppStore，版本号为当前日期+次数，并打tag提交。<h2 id="流程示意图"><a href="#流程示意图" class="headerlink" title="流程示意图"></a>流程示意图</h2><img src="https://img.wxz.name/15583584051012.jpg"><h2 id="Ci结果图"><a href="#Ci结果图" class="headerlink" title="Ci结果图"></a>Ci结果图</h2><img src="https://img.wxz.name/15583584946186.jpg"></li>
</ul>
<h1 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h1><h2 id="选用工具"><a href="#选用工具" class="headerlink" title="选用工具"></a>选用工具</h2><ul>
<li>github作为存储代码的仓库</li>
<li>travis-ci作为构建的ci</li>
<li>fastlane作为构建工具<blockquote>
<p>注意，如果你的仓库是私有仓库的话，travis-ci将不再免费，不过如果通过了学生认证的话，依旧是免费的，笔者因为目前是学生，所以并没有单独购买。</p>
</blockquote>
</li>
</ul>
<h2 id="期间遇到的坑"><a href="#期间遇到的坑" class="headerlink" title="期间遇到的坑"></a>期间遇到的坑</h2><ul>
<li>travis-ci 的KeyChain导致不能编译</li>
<li>apple的两步验证导致流程不能通过</li>
<li>build号自增</li>
</ul>
<h2 id="1-配置Fastlane"><a href="#1-配置Fastlane" class="headerlink" title="1.配置Fastlane"></a>1.配置Fastlane</h2><p>首先进入工程目录，安装并对工程目录初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装fastlane</span><br><span class="line">sudo gem install fastlane -NV</span><br><span class="line"># 初始化工程</span><br><span class="line">fastlane init</span><br></pre></td></tr></table></figure>
<p>接着修改Fastfile文件<br>可以参照我的<a target="_blank" rel="noopener" href="https://gist.github.com/isnine/d4aacf8fcc7ecae50c3c8390651b893f">Fastfile文件</a></p>
<h2 id="1-1-更新版本号配置"><a href="#1-1-更新版本号配置" class="headerlink" title="1.1 更新版本号配置"></a>1.1 更新版本号配置</h2><p>在这一步中，我会先从iTunes Connect上获取最新的版本号，然后拉取下来，如果日期相同，则加一，否则重置为当天日期+01.比如19055101</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 更新版本号</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">updateProjectBuildNumber</span></span></span><br><span class="line">   currentTime = Time.new.strftime(<span class="string">&quot;%y%m%d&quot;</span>)</span><br><span class="line">   build = latest_testflight_build_number(<span class="symbol">version:</span> get_version_number)</span><br><span class="line">   puts(<span class="string">&quot;*************| Tag: <span class="subst">#&#123;build&#125;</span> |*************&quot;</span>)</span><br><span class="line">   buildStr = build.to_s</span><br><span class="line">   <span class="keyword">if</span> buildStr.<span class="keyword">include</span>?<span class="string">&quot;<span class="subst">#&#123;currentTime&#125;</span>&quot;</span></span><br><span class="line">      <span class="comment"># =&gt; 为当天版本 计算迭代版本号</span></span><br><span class="line">      lastStr = buildStr[buildStr.length-<span class="number">2</span>..buildStr.length-<span class="number">1</span>]</span><br><span class="line">      lastNum = lastStr.to_i</span><br><span class="line">      lastNum = lastNum + <span class="number">1</span></span><br><span class="line">      lastStr = lastNum.to_s</span><br><span class="line">      <span class="keyword">if</span> lastNum &lt; <span class="number">10</span></span><br><span class="line">         lastStr = lastStr.insert(<span class="number">0</span>,<span class="string">&quot;0&quot;</span>)</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      build = <span class="string">&quot;<span class="subst">#&#123;currentTime&#125;</span><span class="subst">#&#123;lastStr&#125;</span>&quot;</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      <span class="comment"># =&gt; 非当天版本 build 号重置</span></span><br><span class="line">      build = <span class="string">&quot;<span class="subst">#&#123;currentTime&#125;</span>01&quot;</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   puts(<span class="string">&quot;*************| 更新build <span class="subst">#&#123;build&#125;</span> |*************&quot;</span>)</span><br><span class="line">   <span class="comment"># =&gt; 更改项目 build 号</span></span><br><span class="line">   increment_build_number(</span><br><span class="line">   <span class="symbol">build_number:</span> <span class="string">&quot;<span class="subst">#&#123;build&#125;</span>&quot;</span></span><br><span class="line">   )</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="1-3-上传testFlight配置"><a href="#1-3-上传testFlight配置" class="headerlink" title="1.3 上传testFlight配置"></a>1.3 上传testFlight配置</h2><p>在这一部中，我会首先编译当前的app，然后上传到testFlight,最后更新版本tag，push到远端，再上传dysm到fabric中。Changelog.txt里会存放我这个版本的变更内容。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span> <span class="keyword">do</span></span><br><span class="line">   lane <span class="symbol">:beta</span> <span class="keyword">do</span></span><br><span class="line">      <span class="comment"># 编译app</span></span><br><span class="line">      buildApp</span><br><span class="line">      <span class="comment"># 上传</span></span><br><span class="line">      upload_to_testflight(</span><br><span class="line">      <span class="symbol">beta_app_feedback_email:</span> <span class="string">&quot;wxz@wxz.name&quot;</span>,</span><br><span class="line">      <span class="symbol">beta_app_description:</span> <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="symbol">notify_external_testers:</span> <span class="literal">false</span>,</span><br><span class="line">      <span class="symbol">distribute_external:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="symbol">changelog:</span> File.read(<span class="string">&quot;Changelog.txt&quot;</span>),</span><br><span class="line">      <span class="symbol">groups:</span> [<span class="string">&quot;testflight.top&quot;</span>,<span class="string">&quot;Price Tag&quot;</span>,<span class="string">&quot;其他渠道&quot;</span>],</span><br><span class="line">      )</span><br><span class="line">      <span class="comment"># 更新版本tag</span></span><br><span class="line">      add_git_tag</span><br><span class="line">      <span class="keyword">if</span> is_ci?</span><br><span class="line">        system <span class="string">&quot;git push https://isnine:$&#123;GH_Token&#125;@github.com/user/repo.git --tags&quot;</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">        push_to_git_remote</span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line">      <span class="comment"># 上传dysm</span></span><br><span class="line">      <span class="comment"># crashlytics(api_token: &quot;xxxxx&quot;,</span></span><br><span class="line">      <span class="comment"># build_secret: &quot;xxxx&quot;)</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   <span class="comment"># 编译当前app</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildApp</span></span></span><br><span class="line">   <span class="comment"># 更改build号</span></span><br><span class="line">   updateProjectBuildNumber</span><br><span class="line">   <span class="comment"># 编译</span></span><br><span class="line">   build_app(<span class="symbol">workspace:</span> <span class="string">&quot;easy.xcworkspace&quot;</span>, <span class="symbol">scheme:</span> <span class="string">&quot;easy&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="1-4-上传appStore配置"><a href="#1-4-上传appStore配置" class="headerlink" title="1.4 上传appStore配置"></a>1.4 上传appStore配置</h2><p>这一步和上一步也类似，只是apple store的选项比较多</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span> <span class="keyword">do</span></span><br><span class="line">   lane <span class="symbol">:release</span> <span class="keyword">do</span></span><br><span class="line">      <span class="comment"># 编译app</span></span><br><span class="line">      buildApp</span><br><span class="line">      <span class="comment"># 上传app</span></span><br><span class="line">      upload_to_app_store(</span><br><span class="line">      <span class="symbol">skip_screenshots:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="symbol">skip_metadata:</span> <span class="literal">false</span>,</span><br><span class="line">      <span class="symbol">reject_if_possible:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="comment"># skip_binary_upload: true,</span></span><br><span class="line">      <span class="symbol">force:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="symbol">app_review_information:</span> &#123;</span><br><span class="line">         <span class="symbol">first_name:</span> <span class="string">&#x27;W&#x27;</span>,</span><br><span class="line">         <span class="symbol">last_name:</span> <span class="string">&#x27;XZ&#x27;</span>,</span><br><span class="line">         <span class="symbol">phone_number:</span> <span class="string">&#x27;+86 1760000000&#x27;</span>,</span><br><span class="line">         <span class="symbol">email_address:</span> <span class="string">&#x27;user@example.com&#x27;</span>,</span><br><span class="line">         <span class="symbol">demo_user:</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">         <span class="symbol">demo_password:</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">         <span class="symbol">notes:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="symbol">submit_for_review:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="symbol">submission_information:</span> &#123;</span><br><span class="line">         <span class="symbol">add_id_info_limits_tracking:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">add_id_info_serves_ads:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">add_id_info_tracks_action:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">add_id_info_tracks_install:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">add_id_info_uses_idfa:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">content_rights_has_rights:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">content_rights_contains_third_party_content:</span> <span class="literal">true</span>,</span><br><span class="line">         <span class="symbol">export_compliance_platform:</span> <span class="string">&#x27;ios&#x27;</span>,</span><br><span class="line">         <span class="symbol">export_compliance_compliance_required:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_encryption_updated:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_app_type:</span> <span class="literal">nil</span>,</span><br><span class="line">         <span class="symbol">export_compliance_uses_encryption:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_is_exempt:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_contains_third_party_cryptography:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_contains_proprietary_cryptography:</span> <span class="literal">false</span>,</span><br><span class="line">         <span class="symbol">export_compliance_available_on_french_store:</span> <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="symbol">release_notes:</span> &#123;<span class="string">&#x27;default&#x27;</span> =&gt; File.read(<span class="string">&quot;Changelog.txt&quot;</span>),</span><br><span class="line">                      <span class="string">&#x27;zh-Hans&#x27;</span> =&gt; File.read(<span class="string">&quot;Changelog.txt&quot;</span>),</span><br><span class="line">                      <span class="string">&#x27;en-US&#x27;</span> =&gt; File.read(<span class="string">&quot;Changelog.txt&quot;</span>)&#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="comment"># 更新版本tag</span></span><br><span class="line">      add_git_tag</span><br><span class="line">      <span class="keyword">if</span> is_ci?</span><br><span class="line">        system <span class="string">&quot;git push https://isnine:$&#123;GH_Token&#125;@github.com/user/repo.git --tags&quot;</span></span><br><span class="line">     <span class="keyword">else</span></span><br><span class="line">        push_to_git_remote</span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line">      <span class="comment"># 上传dysm</span></span><br><span class="line">      <span class="comment"># crashlytics(api_token: &quot;xxxx&quot;,</span></span><br><span class="line">      <span class="comment"># build_secret: &quot;xxx&quot;)</span></span><br><span class="line">   <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="2-ci配置"><a href="#2-ci配置" class="headerlink" title="2 ci配置"></a>2 ci配置</h2><p>完成了上面两步，其实已经可以通过fastlane beta和fastlanbe release在本地发布了，因为本地非常方面，其实是不需要考虑以下问题。</p>
<ul>
<li>证书导入</li>
<li>私钥导入</li>
<li>github push权限</li>
<li>apple connect权限</li>
<li>两步认证<br>而CI因为每次启动都是一个新的环境，这些全部要考虑一遍。<br>首先需要再fastlane/certs/目录下存放好相关的p12和描述文件,如图所示:<br><img src="https://img.wxz.name/15584097255132.jpg"><br>接着我在fastlane目录下，写了个导入描述文件的脚本:<br>load_provision.sh<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles</span><br><span class="line">cp ./certs/*.mobileprovision ~/Library/MobileDevice/Provisioning\ Profiles/</span><br></pre></td></tr></table></figure>
最后Fastfile部分如下<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 记得提前在CI中设置 https://travis-ci.com/&#123;user&#125;/&#123;app&#125;/settings</span></span><br><span class="line">  <span class="comment"># - GH_Token //Github的token</span></span><br><span class="line">  <span class="comment"># - Cert_PassWord //证书密码</span></span><br><span class="line">  <span class="comment"># - FASTLANE_PASSWORD // Apple 账号密码</span></span><br><span class="line">  <span class="comment"># - FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD //不开两步认证忽略，PassWord apple专用密码</span></span><br><span class="line">  <span class="comment"># - Apple_Session //appleSession，不开两步认证忽略，通过fastlane spaceauth -u user<span class="doctag">@example</span>.com获得</span></span><br><span class="line">  lane <span class="symbol">:ci</span> <span class="keyword">do</span></span><br><span class="line">     branch = git_branch</span><br><span class="line">     puts(<span class="string">&quot;*************| 当前branch <span class="subst">#&#123;branch&#125;</span> |*************&quot;</span>)</span><br><span class="line">     <span class="comment"># 配置环境</span></span><br><span class="line">     keychain_name = <span class="string">&quot;easy-build&quot;</span></span><br><span class="line">     keychain_password = <span class="string">&quot;travis&quot;</span></span><br><span class="line">     <span class="comment"># 设置session 规避两步验证码，不开两步认证忽略</span></span><br><span class="line">     <span class="comment"># ENV[&quot;FASTLANE_SESSION&quot;] = File.read(&quot;session.txt&quot;)</span></span><br><span class="line">     <span class="comment"># 创建临时钥匙串</span></span><br><span class="line">     create_keychain(</span><br><span class="line">     <span class="symbol">name:</span> keychain_name,</span><br><span class="line">     <span class="symbol">password:</span> keychain_password,</span><br><span class="line">     <span class="symbol">default_keychain:</span> <span class="literal">true</span>,</span><br><span class="line">     <span class="symbol">unlock:</span> <span class="literal">true</span>,</span><br><span class="line">     <span class="symbol">timeout:</span> <span class="number">3600</span>,</span><br><span class="line">     <span class="symbol">add_to_search_list:</span> <span class="literal">true</span></span><br><span class="line">     )</span><br><span class="line">     <span class="comment"># 导入私钥</span></span><br><span class="line">     import_certificate(</span><br><span class="line">     <span class="symbol">certificate_path:</span> <span class="string">&quot;./fastlane/certs/dist.p12&quot;</span>,</span><br><span class="line">     <span class="symbol">certificate_password:</span> ENV[<span class="string">&quot;Cert_PassWord&quot;</span>],</span><br><span class="line">     <span class="symbol">keychain_name:</span> keychain_name,</span><br><span class="line">     <span class="symbol">keychain_password:</span> keychain_password</span><br><span class="line">     )</span><br><span class="line">     import_certificate(</span><br><span class="line">     <span class="symbol">certificate_path:</span> <span class="string">&quot;./fastlane/certs/dev.p12&quot;</span>,</span><br><span class="line">     <span class="symbol">certificate_password:</span> ENV[<span class="string">&quot;Cert_PassWord&quot;</span>],</span><br><span class="line">     <span class="symbol">keychain_name:</span> keychain_name,</span><br><span class="line">     <span class="symbol">keychain_password:</span> keychain_password</span><br><span class="line">     )</span><br><span class="line">     <span class="comment"># 拉取证书</span></span><br><span class="line">     system <span class="string">&quot;sh ./load_provision.sh&quot;</span></span><br><span class="line">     <span class="comment"># sigh(app_identifier: &quot;bundle.id&quot;,</span></span><br><span class="line">     <span class="comment">#   username: &quot;user<span class="doctag">@exampe</span>.com&quot;)</span></span><br><span class="line">     <span class="keyword">if</span> branch.start_with? <span class="string">&quot;master&quot;</span></span><br><span class="line">        beta</span><br><span class="line">     <span class="keyword">elsif</span> branch.start_with? <span class="string">&quot;release&quot;</span></span><br><span class="line">        release</span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="2-1-Travis-ci配置"><a href="#2-1-Travis-ci配置" class="headerlink" title="2.1 Travis-ci配置"></a>2.1 Travis-ci配置</h2><blockquote>
<p>这部分我以新开一个开发者账号的方式讲，我强烈推荐这种方式。<br>你可以在后文中找到，如果不开新账号，用原来带有两步认证的开发者账号怎么实现。</p>
</blockquote>
</li>
</ul>
<p>这里我们一共需要配置四个环境变量</p>
<ul>
<li>GH_Token //Github的token</li>
<li>Cert_PassWord //证书密码</li>
<li>FASTLANE_USER // Apple 账号</li>
<li>FASTLANE_PASSWORD // Apple 账号密码<br><img src="https://img.wxz.name/15584100323855.jpg"><h3 id="GH-Token"><a href="#GH-Token" class="headerlink" title="GH_Token"></a>GH_Token</h3>这一步是为了解决push权限的问题<br><img src="https://img.wxz.name/15584101532733.jpg"><br><img src="https://img.wxz.name/15584101656036.jpg"><br>然后将创建的token复制过来作为GH_Token的值即可<blockquote>
<p>记得前面Fastfile里面的仓库地址也要改</p>
</blockquote>
<h3 id="FASTLANE-USER和FASTLANE-PASSWORD"><a href="#FASTLANE-USER和FASTLANE-PASSWORD" class="headerlink" title="FASTLANE_USER和FASTLANE_PASSWORD"></a>FASTLANE_USER和FASTLANE_PASSWORD</h3><a target="_blank" rel="noopener" href="https://appstoreconnect.apple.com/">https://appstoreconnect.apple.com/</a><br>这个很好理解，你的apple账号和密码。我踩了无数坑了，强烈建议重新创一个没有两步认证的apple小号。<br>然后在大号中邀请进来.<br>个人开发者账号虽然邀请进来的人不能拉取证书，但是一样有权限发布上传App<br><img src="https://img.wxz.name/15584105581907.jpg"><br>接着在ci中把FASTLANE_USER和FASTLANE_PASSWORD这两项配置好</li>
</ul>
<h3 id="Cert-PassWord"><a href="#Cert-PassWord" class="headerlink" title="Cert_PassWord"></a>Cert_PassWord</h3><p>我们在keychain中，导出时设置的p12文件的密码，就是这一项<br><img src="https://img.wxz.name/15584106259902.jpg"></p>
<h1 id="踩过的坑"><a href="#踩过的坑" class="headerlink" title="踩过的坑"></a>踩过的坑</h1><h2 id="1-为什么不直接用带有两步认证的账号"><a href="#1-为什么不直接用带有两步认证的账号" class="headerlink" title="1.为什么不直接用带有两步认证的账号"></a>1.为什么不直接用带有两步认证的账号</h2><p>如果用带两步认证的账号，需要配置apple专用密码，并且还要加上session。<br>而session特别容易过期，网上说是30天，笔者测试下来一天就要重新设置一次，十分痛苦<br>如果一定要用的话，可以在刚刚的流程结束完，在ci中设置一个新的环境变量<br>FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD<br>可以在这里面设置<a target="_blank" rel="noopener" href="https://appleid.apple.com/account/manage">https://appleid.apple.com/account/manage</a><br><img src="https://img.wxz.name/15584109865524.jpg"><br>同时因为登录会话的问题，如果想在ci上直接绕过两步认证，还需要配置好session</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane spaceauth -u user@example.com #你的apple账号</span><br></pre></td></tr></table></figure>
<p>然后复制session，我这里是在fastlane文件夹下创建了一个session.txt<br>将内容复制到里面去。<br>在脚本中再通过代码设置出来</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENV[<span class="string">&quot;FASTLANE_SESSION&quot;</span>] = File.read(<span class="string">&quot;session.txt&quot;</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2018/12/29/summary-2018/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/29/summary-2018/" class="post-title-link" itemprop="url">一个句号的落笔是另一句话的开始 - 2018年小结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-12-29 23:20:58" itemprop="dateCreated datePublished" datetime="2018-12-29T23:20:58+08:00">2018-12-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-12-31 23:11:15" itemprop="dateModified" datetime="2018-12-31T23:11:15+08:00">2018-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在过去，我有很多时刻有想过我的2018年会是怎么样的。<br>之所以这么多次的想，是因为我知道这一年是我参加校招，选定未来人生方向的一年。<br>可实际上，在年末的结尾，我发现这一年并不是我想的那么重要。</p>
<h1 id="实习"><a href="#实习" class="headerlink" title="实习"></a>实习</h1><h2 id="量变与质变"><a href="#量变与质变" class="headerlink" title="量变与质变"></a>量变与质变</h2><p>2018年一整年都在头条实习，从最开始担心不能胜任，到如今想要做得更好，做到极致，我认为还是有”量“的区别，但我认为还没有达到”质“的变化。写代码依旧在写代码，架构意识，代码质量意识，都有加强，但是还有欠缺，一者是思维方式。从最开始”做一个功能“，到要先思考<br>”这个功能是不是有做的必要“<br>”简单的功能能否做到极致“<br>”复杂的功能能否做到简单“<br>”重复性的功能能否自动化“<br>”工作时有没有注意到其他同事，能否沟通合作“<br>这开始一项又一项的思考，是我的直接leader（腾讯T4总监）教给我的。<br>而我开始也以一个正式员工开始要求自己。我觉得凡事如果决定要做了就一定要做好。</p>
<h2 id="生活和同事"><a href="#生活和同事" class="headerlink" title="生活和同事"></a>生活和同事</h2><p>我记得18年1月8日实习入职时，头条在深圳的研发只有60多人。现在是18年12月31日，已经有四五百人了。<br>这真的是我见过发展最疯狂迅速的公司，在公司的报告上确实也说，没有一家互联网公司有我们的发展速度，如今估值已经高过了百度的市值。<br>而且重要的是，因为都是新鲜血液，加上头条的招聘标准特别困难（参照校招的难度吧，社招更变态），所以同事都真的很靠谱，人也挺好的。<br>工作环境方面，窗外就是海景，对面是香港。<br><img src="https://img.wxz.name/IMG_3669.JPG" alt="IMG_3669"><br>伙食方面，每天三餐自助+下午茶，进口咖啡机，无限零食<br><img src="https://img.wxz.name/IMG_0026.JPG" alt="IMG_0026"><br><img src="https://img.wxz.name/IMG_9031.JPG" alt="IMG_9031"><br>因为项目快要发布了，所以可能偶尔加加班晚点回去，好在租的房子就离公司走路5分钟，也还好<br><img src="https://img.wxz.name/IMG_1317.JPG" alt="IMG_1317"><br>总之感觉生活方面，一切都好啦</p>
<h2 id="英语与健身"><a href="#英语与健身" class="headerlink" title="英语与健身"></a>英语与健身</h2><p>觉得这个真的是18年做的最不好的两件事，可能因为不是热爱的东西，就真的很难坚持<br>但是我觉得这两项，真的是只有坚持了才有效果。<br>19年一定一定要坚持下去！</p>
<h1 id="校招"><a href="#校招" class="headerlink" title="校招"></a>校招</h1><p>在17年小结时，可以说我预想的人生轨迹是<br>1月份在头条实习，4月份进入BAT实习，10月份选择更好的部门<br>然而我一直在头条实习到了现在</p>
<h2 id="选择的重要"><a href="#选择的重要" class="headerlink" title="选择的重要"></a>选择的重要</h2><p>回顾一年，我觉得在过去一直以来，我做人生规划的时候，忽视掉了一个很重要的问题。<br>信息的不对称性。在过去做计划的时候，我一直停留在一个思维程度上，几个选择是可以比较的，就是一者绝对比另一者好。<br>例如在高考中，Top2&gt;985&gt;211&gt;一本&gt;二本。750分的高考分数，每一所大学都有它自己的分数线，武书连等各个排名榜，都写着各个高校的排名。<br>而我，要思考的其实只有简简单单的一件事 - 努力提升自己<br>18年末尾之前，我一直以为这个定律也可以依照下去。<br>按照名声市值，腾讯阿里&gt;百度&gt;头条滴滴美团，那么选工作，也按照这个来选，那就轻而易举了。<br>所以我只需要考虑怎么通过面试即可，通过面试才是最难的。<br>而真正最后我发现，<strong>面试并不难，选择才困难。</strong></p>
<h2 id="选择的多样性"><a href="#选择的多样性" class="headerlink" title="选择的多样性"></a>选择的多样性</h2><p>在拿下百度腾讯阿里头条的offer后<br><img src="https://img.wxz.name/15462688193599.jpg"><br>我要面临的只是一个选择，可当我真正选择时，我才发现这个按钮，出乎意料的难以按下。<br>选择根本不是一件只靠公司好坏这一件事可以判断的<br>薪资，工作城市，工作环境，leader为人，部门氛围，晋升机会，研究方向，业务方向，加班强度<br>就像解一个n元n次方程，未知量远多于已知量，根本就难以得到一个最优解。<br>同时拿到几家offer后，做选择的那几周，其实是过的并不好的，经常会睡不好，实习也难以集中精力。<br>几番思考后，我决定改变求解的方程式，换算成求<strong>当下最优解</strong></p>
<h2 id="选择的当下最优解"><a href="#选择的当下最优解" class="headerlink" title="选择的当下最优解"></a>选择的当下最优解</h2><p>作为一个研发工程师，我认为技术水平是第一重要的，只要满足自身的水平大于当前同一阶段的其他竞争者，那么哪怕社招时，我再重新面试，也一样可以通过。出于这一点考虑，那么不管去哪，只要认真努力，其实应该都不会差，但是考虑去其他部门，可能新入职会拧螺丝钉打杂，头条这边我觉得发挥的空间更大。此外部门同事也比较熟，薪资也高于BAT一大截。再结合这边hr，leader，导师等各种劝留，还是留在了这边。</p>
<h2 id="一些感悟"><a href="#一些感悟" class="headerlink" title="一些感悟"></a>一些感悟</h2><p>选择大于努力，这是我今年在校招方面最大的感触吧，我新的一年能多去看看书，和人交流，尽可能的走好每一个人生方向。</p>
<h1 id="项目方面"><a href="#项目方面" class="headerlink" title="项目方面"></a>项目方面</h1><p>最近在写一个新的app-EASY相册，基本马上就要开始上架了，还是挺开心的，毕竟是一个自己独立开发的app，而且产品也是自己设计的，这种创造的感觉，真的是太棒了！基本快写完了，你们应该过几天都可以看到了。<br><img src="https://img.wxz.name/easy_banner.png" alt="easy_banner"><br>做完这个应用后，应该会尝试用flutter写一个短链接整理的app，会包括Android端和iOS端，大概春节过后吧<br><img src="https://img.wxz.name/15462690176646.jpg"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>相比17年的总结，我觉得这篇18年的总结更像反思。我没有去写秋招怎么通过二十几轮面试，也没写CCCC移动赛怎么拿到一等奖，是因为我觉得随着18年的结束，这一切大学时期的东西，都像划上的句号一样与19年无关了，所以我想借着写总结来理一理自己的19年的思路。期望能工作的更极致，专注技术提升，坚持锻炼与英语。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2018/05/02/iOS-UndoManager/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/02/iOS-UndoManager/" class="post-title-link" itemprop="url">iOS UndoManager</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-05-02 20:55:17" itemprop="dateCreated datePublished" datetime="2018-05-02T20:55:17+08:00">2018-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-12-26 21:54:52" itemprop="dateModified" datetime="2018-12-26T21:54:52+08:00">2018-12-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这几天在实现iOS撤销操作的坑，发现网上相关学习资料的是在是太少了，这里做一个文档的记录。</p>
<h1 id="UndoManager的介绍"><a href="#UndoManager的介绍" class="headerlink" title="UndoManager的介绍"></a>UndoManager的介绍</h1><blockquote>
<p>Overview<br>You register an undo operation by calling one of the methods described in Registering Undo Operations. You specify the name of the object that’s changing (or the owner of that object) and provide a closure, method, or invocation to revert its state.<br>After you register an undo operation, you can call undo() on the undo manager to revert to the state of the last undo operation. When undoing an action, UndoManager saves the operations you reverted to so that you can call redo() automatically.</p>
</blockquote>
<p>从开发文档中看，它的目的简单的说就是，在你调用方法的时候，你可以注册一个undo操作。并且在你注册undo操作后，你可以执行undo()方法来撤销，同时在你撤销时，保存你的撤销操作，你可以调用redo() 来复原</p>
<h1 id="实际开发中需要用到的几个重要方法"><a href="#实际开发中需要用到的几个重要方法" class="headerlink" title="实际开发中需要用到的几个重要方法"></a>实际开发中需要用到的几个重要方法</h1><h2 id="canUndo-与canRedo"><a href="#canUndo-与canRedo" class="headerlink" title="canUndo()与canRedo()"></a>canUndo()与canRedo()</h2><p>通过这两个方法，我们可以知道当前是否可以调用Undo()和Redo()，在实际开发中，我们常常需要做一个undo和redo的按钮，那么通过这个方法，我们可以知道是否开启这个按钮<br><img src="https://img.wxz.name/15252676183619.jpg"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">undoManager?.canUndo &#x3D;&#x3D; true &#123;</span><br><span class="line">    &#x2F;&#x2F; 开启撤销按钮</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    &#x2F;&#x2F; 关闭撤销按钮</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Undo-与redo"><a href="#Undo-与redo" class="headerlink" title="Undo()与redo()"></a>Undo()与redo()</h2><p>调用这两个方法，可以执行相应的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">undoManager?.undo()</span><br><span class="line">undoManager?.redo()</span><br></pre></td></tr></table></figure>
<h2 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h2><p>这是最关键的地方，这里以UITextView为例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func add(style: style, range: range) &#123;</span><br><span class="line">    let textView &#x3D; UITextView()</span><br><span class="line">    textView.undoManager.registerUndo(withTarget: self) &#123; this in</span><br><span class="line">                this.add(style: style, range: range)</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; add方法的实现</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里以一个为文本添加样式的add方法为例子，我们每次在调用add方法时，都会先在undoManager中注册一个撤销的方法，要注意一定要先注册再执行方法，深坑</p>
<h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p><a target="_blank" rel="noopener" href="http://swift.gg/2015/11/10/ios-undo-and-redo-with-nsundomanager/">使用 NSUndoManager 来进行撤销和重做</a><br><a target="_blank" rel="noopener" href="http://nshipster.cn/nsundomanager/">NSUndo​Manager</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2018/04/30/create-private-pod-private/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/30/create-private-pod-private/" class="post-title-link" itemprop="url">创建自己的CocoaPods库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2018-04-30 18:11:12 / Modified: 18:47:00" itemprop="dateCreated datePublished" datetime="2018-04-30T18:11:12+08:00">2018-04-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一直想自己折腾一个第三方库，但是苦于之前一直没写啥好的控件<br>最近工作上写了几个ui控件，终于满足了下开源的心愿，这里记录下步骤</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/04/30/create-private-pod-private/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2018/01/14/IpaPatch-Wechat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/14/IpaPatch-Wechat/" class="post-title-link" itemprop="url">通过IpaPatch分析Wechat界面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-14 21:39:29" itemprop="dateCreated datePublished" datetime="2018-01-14T21:39:29+08:00">2018-01-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-04-30 18:10:10" itemprop="dateModified" datetime="2018-04-30T18:10:10+08:00">2018-04-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>因为某个侧滑功能希望能参照微信来做，但是手上又木有越狱机，所以这里主要通过IpaPatch+Reveal来进行分析。</p>
<h2 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h2><p><a target="_blank" rel="noopener" href="https://revealapp.com/">Reveal</a><br><a target="_blank" rel="noopener" href="https://github.com/Naituw/IPAPatch">IpaPatch</a><br><a target="_blank" rel="noopener" href="https://www.25pp.com/">PP助手</a></p>
<h2 id="准备一个微信APP"><a href="#准备一个微信APP" class="headerlink" title="准备一个微信APP"></a>准备一个微信APP</h2><p>首先需要强调的是，AppStore上下载的iPA是加密过的，所以这里我们通过<a target="_blank" rel="noopener" href="https://www.25pp.com/">PP助手</a>来下载已经砸壳过后的IPA文件。<br><img src="https://img.wxz.name/15159380872900.jpg"></p>
<h2 id="克隆好IpaPatch工程"><a href="#克隆好IpaPatch工程" class="headerlink" title="克隆好IpaPatch工程"></a>克隆好IpaPatch工程</h2><p>IpaPatch是一个 免越狱调试、修改第三方App 的工具，主要过程分为这几部</p>
<ol>
<li>解压 IPA 文件</li>
<li>用 IPA 文件的内容，替换掉 Xcode 生成的 .app 的内容</li>
<li>通过 OPTOOL，将你代码生成的 Framework 及其他外部 Framework，注入到二进制文件中</li>
<li>对这些文件进行重新签名 </li>
</ol>
<h2 id="配置IpaPatch工程"><a href="#配置IpaPatch工程" class="headerlink" title="配置IpaPatch工程"></a>配置IpaPatch工程</h2><p>1.在我们克隆完毕后，我们将我们在pp助手上下载好的微信.ipa重命名为app.ipa然后复制到工程的IPAPatch/Assets/中替换掉原来的app.ipa<br><img src="https://img.wxz.name/15159382651784.jpg"></p>
<p>2.接着我们需要将Reveal中的framework文件复制到Assets/Frameworks/RevealServer.framework中<br><img src="https://img.wxz.name/15159384937355.jpg"></p>
<p>3.修改Display Name和Bundle Identifier。Display Name将加在原app名称之前，可与之前的app共存。<br><img src="https://img.wxz.name/15159385259266.jpg"></p>
<h2 id="调试界面"><a href="#调试界面" class="headerlink" title="调试界面"></a>调试界面</h2><ol>
<li>点击 Build 后就可以在我们真机上看到啦，然后打开Reveal，就可以看到微信的界面了<br> <img src="https://img.wxz.name/15159387058492.jpg"></li>
</ol>
<h2 id="开始分析"><a href="#开始分析" class="headerlink" title="开始分析"></a>开始分析</h2><h3 id="从层级开始分析"><a href="#从层级开始分析" class="headerlink" title="从层级开始分析"></a>从层级开始分析</h3><p>整体是一个tableview的界面，每个cell中，消息部分作为一个view与滑动部分的view所并列<br><img src="https://img.wxz.name/Lark20180114221705.png" alt="Lark20180114221705"><br>在一整个滑动view中，又是分为两个button，其中尺寸如第二条所分析<br><img src="https://img.wxz.name/15159396834913.jpg"></p>
<h3 id="从尺寸分析"><a href="#从尺寸分析" class="headerlink" title="从尺寸分析"></a>从尺寸分析</h3><p>首先我的手机是iphone7 Plus,屏幕尺寸为 414 * 736，在微信设置的滑动view的大小为 175 * 68，其中</p>
<ul>
<li>滑动view的大小为 175 * 68</li>
<li>“标为未读”按钮的宽度为116.6</li>
<li>“删除”按钮的宽度为75.9</li>
<li>其中两个按钮中有重叠部分，应该是为了动画效果而保留的。</li>
</ul>
<p><img src="https://img.wxz.name/15159392238970.jpg"></p>
<h3 id="从动画分析"><a href="#从动画分析" class="headerlink" title="从动画分析"></a>从动画分析</h3><h4 id="1-刚开始滑动—-gt-滑动完成"><a href="#1-刚开始滑动—-gt-滑动完成" class="headerlink" title="1. 刚开始滑动—&gt;滑动完成"></a>1. 刚开始滑动—&gt;滑动完成</h4><p>   开始滑动的那一刻立即创建两个button，同时两者随手势向左侧滑动。但是第二个“删除”按钮<strong>滑动速度较慢</strong>。<br>   左侧聊天信息的view紧临“标为未读”的button。同时父视图cell位置不变<br> <img src="https://img.wxz.name/15159398498752.jpg"></p>
<h4 id="2-滑动完成，到达稳定的状态"><a href="#2-滑动完成，到达稳定的状态" class="headerlink" title="2. 滑动完成，到达稳定的状态"></a>2. 滑动完成，到达稳定的状态</h4><p>cell的位置没变<br>但cell子视图的聊天view左移了，并且紧邻滑动view为同一层级<br>滑动view中又分为两个button，并且<strong>位置有一定的重叠</strong><br><img src="https://img.wxz.name/15159402686411.jpg"></p>
<h4 id="3-返回过程"><a href="#3-返回过程" class="headerlink" title="3. 返回过程"></a>3. 返回过程</h4><p>   为之前动画的逆过程，不再赘述</p>
<h4 id="4-长拖效果"><a href="#4-长拖效果" class="headerlink" title="4. 长拖效果"></a>4. 长拖效果</h4><p>  拖动按钮时，按钮会随着一起拖动。<br>  分析层级，发现滑动view的位置并没有感觉。<br>  实际上<strong>改变的是两个button的长度</strong>，他们超过了父view，显示出了这样一个效果。<br><img src="https://img.wxz.name/15159405300287.jpg"></p>
<h4 id="5-删除效果"><a href="#5-删除效果" class="headerlink" title="5. 删除效果"></a>5. 删除效果</h4><p>  <strong>之前的“标为未读”按钮被删除了</strong>，全部只剩下了“删除”按钮。动画过程，因为真机显示太快我还木有抓到。<br><img src="https://img.wxz.name/2.png" alt="2"></p>
<h4 id="6-删除返回"><a href="#6-删除返回" class="headerlink" title="6. 删除返回"></a>6. 删除返回</h4><p>  随着手势的返回，将<strong>“删除”按钮位置右移</strong>，聊天view紧邻删除button，但主要的是<strong>删除button的父view位置是不动的</strong><br><img src="https://img.wxz.name/15159410586968.jpg"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>关于微信滑动的实现，几个关键的点</p>
<ol>
<li>首先层级是cell最上，包含聊天view和滑动view。其中滑动view在没有开始滑动时是不创建的，滑动开始立刻创建，收回后立即销毁。</li>
<li>滑动动画上，像抽屉的效果是<strong>通过移速不同</strong>，“标为未读”在“删除”下面，这样拖动和拖回产生了一个折叠的效果</li>
<li>自始至终，<strong>cell的位置是不变得</strong>，这也就保证了，无论的滑动view还是聊天view都不会因为父视图超过自身位置，因为响应链的原因而不响应。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2017/12/30/summary-2017/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/30/summary-2017/" class="post-title-link" itemprop="url">做什么都是因为喜欢 - 2017小结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-30 23:55:04" itemprop="dateCreated datePublished" datetime="2017-12-30T23:55:04+08:00">2017-12-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-12-31 23:05:02" itemprop="dateModified" datetime="2018-12-31T23:05:02+08:00">2018-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>  大学里用的最长的两个个性签名，一个是“做什么都是因为喜欢”，另一个则是“没伞的人拼命跑”。于我而言，2017应该算是人生中最重要的一年了吧。<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/12/30/summary-2017/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2017/07/24/2017SummerVaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/24/2017SummerVaction/" class="post-title-link" itemprop="url">大二暑假日常记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-24 21:12:27" itemprop="dateCreated datePublished" datetime="2017-07-24T21:12:27+08:00">2017-07-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-12-31 11:38:49" itemprop="dateModified" datetime="2017-12-31T11:38:49+08:00">2017-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>大学里最后一个有时间提高自己的的暑假就这么过去了<br>看了看立下的目标好像全部打了个五折23333</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/07/24/2017SummerVaction/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.zanderwang.com/2017/05/28/ios-resign/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zander Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zander`s blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/28/ios-resign/" class="post-title-link" itemprop="url">ipa重签名踩坑记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-05-28 23:34:58" itemprop="dateCreated datePublished" datetime="2017-05-28T23:34:58+08:00">2017-05-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2017-07-10 12:25:41" itemprop="dateModified" datetime="2017-07-10T12:25:41+08:00">2017-07-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前几天看到叉叉助手推了一个新功能，不越狱就可以用脚本挂游戏。当时黑人问号脸，这是什么黑科技。<br>后面点进去发现是将游戏ipa里面植入游戏脚本，然后用企业证书分发给用户使用。然而每个月要收30元，美其名曰证书费。<br>我突发奇想，我能不能用我的个人证书签名呢.</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/05/28/ios-resign/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zander Wang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zander Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
